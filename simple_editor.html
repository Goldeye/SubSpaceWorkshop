<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>SubSpace Workshop</title>

    <script type="module">

        let overrideTilemapShader = () => {

            const fs = require('fs');
            const tilemapChromaFragmentShader = fs.readFileSync("assets/glsl/tilemap_chroma.frag").toString();
            window.tilemapChromaFragmentShader = tilemapChromaFragmentShader;

            PIXI.tilemap.shaderGenerator.generateFragmentSrc = (maxTextures) => {
                return tilemapChromaFragmentShader.replace(/%count%/gi, maxTextures + "")
                    .replace(/%forloop%/gi, PIXI.tilemap.shaderGenerator.generateSampleSrc(maxTextures));
            };
        };

        // JS libraries.
        // const fs = require('fs');
        const remote = require('electron');
        const THREE = window.THREE = require('three');
        // const customTitlebar = require('custom-electron-titlebar');
        const stats = require("stats.js");
        const uuid = require('uuid');

        const PIXI = window.PIXI = require("pixi.js");
        require("pixi-tilemap");

        overrideTilemapShader();

        window.$ = window.jQuery = require('jquery');

        // Project JS files.
        const main = require("./assets/js/main.js");

        $(function () {
            // Start application.
            main.start();
        });

    </script>

    <link rel="stylesheet" href="assets/css/project.min.css"/>

</head>
<body>

<div class="editor_frame dark">

    <div id="viewport-frame" class="viewport-frame right-panel-open">

        <div id="editor-tab-menu" class="tab-menu"></div>

        <div class="map-viewport-container" style="display: block">

            <!-- Options above the viewport. -->
            <div id="editor-right-tab-menu" class="tab-menu right">
                <div id="assets-tab" class="tab selected"><label>Assets</label></div>
                <div id="objects-tab" class="tab"><label>Objects</label></div>
            </div>

            <!-- The PixiJS canvas goes in here. -->
            <div class="map-viewport-canvas-container">

                <!-- ### Left Panel ### -->
                <div class="side-panel left">
                </div>

                <div class="viewport">
                    <div class="map-viewport-canvas-boxshadow"></div>

                    <!-- The Radar Window -->
                    <div class="workspace-radar">
                        <canvas id="radar" class="radar" width="256" height="256"></canvas>
                    </div>

                </div>
                <div id="right-panel" class="side-panel right">

                    <div class="side-panel-contents">

                        <div id="assets-panel-tab" class="panel-tab open">

                            <!-- Standard Tiles -->
                            <div class="section open">
                                <div class="header">
                                    <div class="arrow"><label></label></div>
                                    <div class="title"><label>Standard Tiles</label></div>
                                </div>
                                <div class="content-frame">
                                    <div class="contents">
                                        <div id="standard-tileset" class="standard-tileset"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Special Tiles -->
                            <div class="section open">
                                <div class="header">
                                    <div class="arrow"><label></label></div>
                                    <div class="title"><label>Special Tiles</label></div>
                                </div>
                                <div class="content-frame">
                                    <div id="special-tiles-section" class="contents"></div>
                                </div>
                            </div>

                            <!-- Map Images -->
                            <div class="section open">
                                <div class="header">
                                    <div class="arrow"><label></label></div>
                                    <div class="title"><label>Map Images</label></div>
                                </div>
                                <div class="content-frame">
                                    <div id="map-image-section" class="contents"></div>
                                </div>
                            </div>
                        </div>

                        <div id="objects-panel-tab" class="panel-tab">
                            <!-- Map Objects -->
                            <div class="section">
                                <div class="header">
                                    <div class="arrow"><label></label></div>
                                    <div class="title"><label>Map Objects</label></div>
                                </div>
                                <div class="content-frame">
                                    <div id="map-objects-section" class="contents"></div>
                                </div>
                            </div>

                            <!-- Regions -->
                            <div class="section">
                                <div class="header">
                                    <div class="arrow"><label></label></div>
                                    <div class="title"><label>Regions</label></div>
                                </div>
                                <div class="content-frame"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
